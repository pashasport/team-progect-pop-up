{"mappings":"AAEA,MAAMA,EAAO,CACXC,aAAcC,SAASC,cAAc,qBACrCC,cAAeF,SAASC,cAAc,sBACtCE,MAAOH,SAASC,cAAc,iBAMhC,SAASG,IACPN,EAAKK,MAAME,UAAUC,OAAO,Y,CAJ9BR,EAAKC,aAAaQ,iBAAiB,QAASH,GAC5CN,EAAKI,cAAcK,iBAAiB,QAASH,GAM7BJ,SAASQ,eAAe,OAAxC,MACMC,EAAQT,SAASC,cAAc,eAE/BS,GADUV,SAASC,cAAc,eACvBD,SAASW,iBAAiB,YACtCD,EAAQE,OAAS,GAIrB,WACE,IAAIC,EAAcC,EAClB,IAAK,IAAIC,EAAQ,EAAGA,EAAQL,EAAQE,OAAQG,IAAS,CAEnDC,EADeN,EAAQK,G,CAIzB,SAASC,EAAWC,GAClBC,EAAeD,GACfE,IACIF,EAAOZ,UAAUe,SAAS,eAahC,SAAmBH,GACjB,MAAMI,EAAcJ,EAAON,iBAAiB,gBAC5C,IAAK,IAAIW,EAAQ,EAAGA,EAAQD,EAAYT,OAAQU,IAAS,CACvD,MAAMC,EAAaF,EAAYC,GAC/BC,EAAWhB,iBAAiB,cAAc,SAAUiB,GAClDN,EAAeD,GACfE,EAAqBI,EAAWE,M,IAElCF,EAAWhB,iBAAiB,cAAc,SAAUiB,GAClDL,G,IAEFI,EAAWhB,iBAAiB,SAAS,SAAUiB,GAC7CN,EAAeD,GAIfH,EAAYY,UAAYJ,EAAQ,EAChCK,EAAeJ,EAAWE,MAAOhB,EAAMgB,OACvCN,IAEAS,QAAQC,IAAIN,EAAWE,M,KAhCzBK,CAAUb,E,CAId,SAASC,EAAeD,GACtBJ,EAAeI,EAAOhB,cAAc,kBACpCa,EAAcG,EAAOhB,cAAc,gB,CAErC,SAASkB,EAAqBG,EAAQR,EAAYY,WAChD,MAAMK,EAAoBT,EAAQ,IAClCT,EAAamB,MAAMC,MAAQ,GAAGF,I,CAiDhCG,eAAeP,EAAeF,EAAOU,GA0BnC,IAAIC,QAAiBC,MACnB,qEACA,CACEC,OAAQ,OACRC,KAAMC,KAAKC,UAAU,CACnBC,WAAYjB,EACZkB,UAAWR,IAGbS,QAAS,CACP,eAAgB,sBAItB,GAAIR,EAASS,GAAI,CACf,MACMC,SADeV,EAASW,QACLD,UACzBhC,EAAYY,UAAYoB,EACxB3B,G,MAEA6B,MAAM,Q,EAvHVC,GA6HF,MAAMC,EAAYlD,SAASC,cAAc,aAYzCD,SAASO,iBAAiB,WAAW,SAAUiB,GAC9B,WAAXA,EAAE2B,MAEJD,EAAU7C,UAAU+C,IAAI,Y","sources":["src/js/pop-up.js"],"sourcesContent":["'use strict';\n\nconst refs = {\n  openModalBtn: document.querySelector('[data-modal-open]'),\n  closeModalBtn: document.querySelector('[data-modal-close]'),\n  modal: document.querySelector('[data-modal]'),\n};\n\nrefs.openModalBtn.addEventListener('click', toggleModal);\nrefs.closeModalBtn.addEventListener('click', toggleModal);\n\nfunction toggleModal() {\n  refs.modal.classList.toggle('is-hidden');\n}\n\nconst getData = document.getElementById('add');\nconst input = document.querySelector('.form-input');\nconst btnSend = document.querySelector('.submit-btn');\nconst ratings = document.querySelectorAll('.rating');\nif (ratings.length > 0) {\n  initRatings();\n}\n\nfunction initRatings() {\n  let ratingActive, ratingValue;\n  for (let index = 0; index < ratings.length; index++) {\n    const rating = ratings[index];\n    initRating(rating);\n  }\n\n  function initRating(rating) {\n    initRatingVars(rating);\n    setRatingActiveWidth();\n    if (rating.classList.contains('rating-set')) {\n      setRating(rating);\n    }\n  }\n\n  function initRatingVars(rating) {\n    ratingActive = rating.querySelector('.rating-active');\n    ratingValue = rating.querySelector('.rating-value');\n  }\n  function setRatingActiveWidth(index = ratingValue.innerHTML) {\n    const ratingActiveWidth = index / 0.05;\n    ratingActive.style.width = `${ratingActiveWidth}%`;\n  }\n  function setRating(rating) {\n    const ratingItems = rating.querySelectorAll('.rating-item');\n    for (let index = 0; index < ratingItems.length; index++) {\n      const ratingItem = ratingItems[index];\n      ratingItem.addEventListener('mouseenter', function (e) {\n        initRatingVars(rating);\n        setRatingActiveWidth(ratingItem.value);\n      });\n      ratingItem.addEventListener('mouseleave', function (e) {\n        setRatingActiveWidth();\n      });\n      ratingItem.addEventListener('click', function (e) {\n        initRatingVars(rating);\n        // if (rating.dataset.ajax) {\n        //setRatingValue(ratingItem.value, input);\n        // } else {\n        ratingValue.innerHTML = index + 1;\n        setRatingValue(ratingItem.value, input.value);\n        setRatingActiveWidth();\n\n        console.log(ratingItem.value);\n        // }\n      });\n    }\n  }\n\n  // const options =  {\n  //       method: 'PATCH',\n  //       body: JSON.stringify({\n  //         userRating: value,\n  //         userMail: getInputData,\n  //       }),\n  //       headers: {\n  //         'Content-Type': 'application/json',\n  //       },\n  // }\n\n  // return fetch('https://tasty-treats-backend.p.goit.global/api/recipes/', options)\n  //   .then(resp => {\n  //     if (!resp.ok) {\n  //       throw new Error(resp.statusText)\n  //     }\n  //     return resp.json()\n  //   })\n  //   .then(data => console.log(data))\n  // .catch(err=>console.log(err))\n\n  async function setRatingValue(value, mail) {\n    // const options = {\n    //   method: 'PATCH',\n    //   body: JSON.stringify({\n    //     userRating: value,\n    //   }),\n    //   headers: {\n    //     'Content-Type': 'application/json',\n    //   },\n    // };\n\n    // return fetch(\n    //   'https://tasty-treats-backend.p.goit.global/api/recipes/{id}/rating',\n    //   options\n    // )\n    //   .then(resp => {\n    //     if (!resp.ok) {\n    //       throw new Error(resp.statusText);\n    //     }\n    //     return resp.json();\n    //   })\n    //   .then(data => console.log(data))\n    //   .catch(err => console.log(err));\n    //  ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n    // if (!rating.classList.add('rating-sending')) {\n    //   rating.classList.add('rating-sending');\n    let response = await fetch(\n      'https://tasty-treats-backend.p.goit.global/api/recipes/{id}/rating',\n      {\n        method: 'POST',\n        body: JSON.stringify({\n          userRating: value,\n          emailUser: mail,\n          // userMail: getInputData,\n        }),\n        headers: {\n          'Content-Type': 'application/json',\n        },\n      }\n    );\n    if (response.ok) {\n      const result = await response.json();\n      const newRating = result.newRating;\n      ratingValue.innerHTML = newRating;\n      setRatingActiveWidth();\n    } else {\n      alert('False');\n    }\n    // }\n  }\n}\n\nconst modalBack = document.querySelector('.backdrop');\n\n// const modalEl = document.querySelector('.modal');\n// document.addEventListener('click', function (e) {\n//   const click = e.composedPath().includes('is-hidden');\n//   if (!click) {\n//     // refs.modal.classList.toggle('is-hidden');\n//     modalEl.style.display = 'none';\n//   }\n//   console.log(click);\n// });\n\ndocument.addEventListener('keydown', function (e) {\n  if (e.code === 'Escape') {\n    // код клавиши Escape, но можно использовать e.key\n    modalBack.classList.add('is-hidden');\n  }\n});\n"],"names":["$0244a5a1b3e8d0b6$var$refs","openModalBtn","document","querySelector","closeModalBtn","modal","$0244a5a1b3e8d0b6$var$toggleModal","classList","toggle","addEventListener","getElementById","$0244a5a1b3e8d0b6$var$input","$0244a5a1b3e8d0b6$var$ratings","querySelectorAll","length","ratingActive","ratingValue","index1","initRating","rating","initRatingVars","setRatingActiveWidth","contains","ratingItems","index","ratingItem","e","value","innerHTML","setRatingValue","console","log","setRating","ratingActiveWidth","style","width","async","mail","response","fetch","method","body","JSON","stringify","userRating","emailUser","headers","ok","newRating","json","alert","$0244a5a1b3e8d0b6$var$initRatings","$0244a5a1b3e8d0b6$var$modalBack","code","add"],"version":3,"file":"index.80bae07a.js.map"}